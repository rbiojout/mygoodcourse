<% provide(:title, @forum_subject.name) %>

<% forum_category = @forum_subject.forum_category %>

<ol class="breadcrumb">
  <li>
    <%= link_to forum_families_path do %>
        <span class="fa fa-home fa-lg"></span> <%= t('page.forum') %>
    <% end %>
  </li>
  <li>
    <span class="fa fa-bullseye fa-lg"></span> <%= forum_category.forum_family.name %>
  </li>
  <li>
    <span class="fa fa-circle-o fa-lg"></span> <%= link_to forum_category.name, forum_category_path(forum_category) %>
  </li>
  <li class="active">
    <span class="fa fa-circle-o fa-lg"></span> <%= @forum_subject.name %>
  </li>
</ol>

<h1><%= @forum_subject.name %></h1>


<div class="row">
  <div class="col-md-8">
    <ul class="forum_subjects-list">
        <%= render(partial: 'forum_subjects/forum_subject', locals: {forum_subject: @forum_subject}) %>
    </ul>
    <ul class="forum_answers-list">
      <!-- add alert with call action to add answer -->
      <!-- if user is not logged-in we don't allow the creation -->
      <% if @forum_answers.count==0 %>
          <% if customer_signed_in? %>
          <%= render(partial: 'shared/dialog_alert', locals: {alert_message: t('dialog.forum_answer.alert_no_answer'),
                                                              alert_link_text: t('helpers.action.forum_answer.create'),
                                                              alert_link_path: new_forum_answer_path(forum_subject_id: @forum_subject.id), alert_remote: true}) %>
          <% else %>
              <%= render(partial: 'shared/dialog_alert', locals: {alert_message: t('dialog.forum_answer.alert_no_answer'),
                                                                  alert_link_text: t('helpers.action.forum_answer.create'),
                                                                  alert_link_path: new_customer_session_path, alert_remote: false}) %>
          <% end %>
      <% end %>
      <!-- end alert -->
      <% @forum_answers.each do |forum_answer| %>
          <%= render(partial: 'forum_answers/forum_answer', locals: {forum_answer: forum_answer}) %>
      <% end %>
      <div id="forum_answer-form"></div>
    </ul>


    <div id="infinite-scrolling-answers" class="row">
      <%= will_paginate(@forum_answers, :renderer => 'BootstrapPaginationHelper::LinkRenderer') %>
    </div>

  </div>
  <div class="col-md-4">
    <!-- top forum_subjects -->
    <h2><%= t('dialog.forum_subject.populars')%></h2>
    <div class="most-viewed-posts">
      <ol class="list-unstyled">
        <% @top_forum_subjects.each do |forum_subject| %>
            <li class>

              <%= link_to (forum_subject_path(forum_subject)) do %>
                  <h3><i class="fa fa-star-o fa-1x active-star"></i>

                    </span><%= forum_subject.name %></h3>
              <% end %>

              <%# render(:partial => 'posts/post', locals: {post: post, with_body: false, with_cols: false}) %>
            </li>
        <% end %>
      </ol>
      </div>
      <!-- end top forum_subjects -->
  </div>
</div>


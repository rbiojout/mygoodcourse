<%

   # context : parameter to refer to the polymorphic
   context ||=@context
   context_type = context.class.name.underscore
   context_param = context.class.name.underscore + "_id"
   context_value = context.id
%>

// we had the new comment at the top, just after the form and hide the form
$('#comment-form_<%="#{context_type}_#{context_value}"%>').html("");
$('#comment-form_<%="#{context_type}_#{context_value}"%>').after("<%= j render partial: 'comments/comment', locals: {comment: @comment}  %>");

// update the number of comments
$('.btn-comment_<%="#{context_type}_#{context_value}"%>').html("<%= j render(partial: 'comments/btn_comment', locals: {context: context}) %>")

// close the modal
// REMOVED no more use of the modal
// $('#app_dialog').modal_success();

// first we need to hide before to show
var target = $('#current_comment');
$('html,body').animate({
    scrollTop: target.offset().top-100
}, 1000);











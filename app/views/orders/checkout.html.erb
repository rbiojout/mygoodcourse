<% @page_title = 'Checkout' %>


<script type="text/javascript">
    Stripe.setPublishableKey('<%= Rails.application.secrets.stripe_publishable_key %>');
</script>


  <%= form_tag(checkout_confirmation_path, method: 'get', id:'payment-form') do %>
    <span class="payment-errors"></span>

    <div class="form-row">
      <label>
        <span>Card Number</span>
        <input type="text" size="20" data-stripe="number">
      </label>
    </div>

    <div class="form-row">
      <label>
        <span>Expiration (MM/YY)</span>
        <input type="text" size="2" data-stripe="exp_month">
      </label>
      <span> / </span>
      <input type="text" size="2" data-stripe="exp_year">
    </div>

    <div class="form-row">
      <label>
        <span>CVC</span>
        <input type="text" size="4" data-stripe="cvc">
      </label>
    </div>

    <div class="form-row">
      <label>
        <span>Billing Zip</span>
        <input type="text" size="6" data-stripe="address_zip">
      </label>
    </div>

    <input type="submit" class="submit" value="Submit Payment">
  <% end %>




  <p>Secure connection</p>
  <h2>Place your order</h2>
  <p>Fantastic! You're ready to place your order, just follow the instructions below and
    we'll get your products shipped to you as quickly as we can.</p>
  <h3>Enter your payment informations</h3>
  <b>Card informations</b>
  <p>Card Number</p>
  <p>Expiration date</p>
  <p>Security code</p>



  .checkout
  %p.secure Secure connection
  %h3 Pay using your credit/debit card
  = form_for @order, :url => checkout_payment_path, :html => {:class => 'checkout'} do |f|
  = field_set_tag nil, :class => 'payment' do
  %h3 This is a demo form. Any values entered here will be accepted.
  %dl
  %dt= label_tag 'card_number', "Full Card Number"
  %dd.number= text_field_tag 'card_number', '', :name => nil
  %dl
  %dt= label_tag 'exp_month', "Expiry Date (mm/yyyy)"
  %dd.expiry
  = select_tag nil, options_for_select((1..12).to_a)
  = select_tag nil, options_for_select((Date.today.year..Date.today.year + 10).to_a), :class => 'year'
  %dl
  %dt= label_tag 'cvc', "Security Code"
  %dd.cvc
  = text_field_tag 'cvc', '', :name => nil, :maxlength => 4
  %span This is the 3 digit number on the back of your card.
  %p.submit= f.submit "Review your order", :class => 'review'



  <div id="orderitem-dropped">
  </div>

  <div id="order_items_index">
    <%= render(partial: "order_items/order_item", collection: current_order.order_items) %>
  </div>


  <h3>Complete your details below to complete your order</h3>

  <h4>Billing adress</h4>

  <h4>Card infos</h4>
  <h3>Pay using your credit/debit card</h3>


      <%= simple_form_for @order, :url => checkout_path, :html => {:class => 'checkout disableable'} do |f| %>
      <%= f.error_notification %>
        <%= f.button :submit  %>
      <% end %>
</div>

<div id="orderitem-modal" class="modal fade"></div>
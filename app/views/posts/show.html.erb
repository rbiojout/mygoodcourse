<% provide(:title, (I18n.translate 'activerecord.models.article', count: 1).capitalize + ' | ' + @post.name ) %>


<h1><%= @post.name %></h1>
<div class="row">
  <div class="col-xs-12">

<% customer = @post.customer %>
<%= image_tag(
            @post.customer.picture,
            class: 'pull-left img-circle customer-picture img-80',
            data: {
                    customer: customer.id,
                    locality:  t('activerecord.attributes.customer.located', :locality => customer.locality.presence||'???'),
                    created: t('activerecord.attributes.customer.since', :created => l(customer.created_at, :format => :short))
            })

    %>
    <div class="pull-left">
      <p class="lead"><%= "#{@post.customer.first_name} #{@post.customer.name}"%></p>
      <p><%= nice_date(@post.created_at)%></p>
    </div>

  </div>
</div>
<div class="row">
  <div class="col-md-8">


<!-- tools -->
<%= render(partial: 'posts/tools', locals: {post: @post}) %>
<!-- end tools -->

<%# image_tag 'http://fakeimg.pl/1200x600/', class: 'img-responsive' %>
<%= image_tag @post.visual, class: 'img-responsive' %>

<p>
  <%= raw(@post.description) %>
</p>

<!-- tools -->
<%= render(partial: 'posts/tools', locals: {post: @post}) %>
<!-- end tools -->

<h2><%= t('activerecord.models.comment', count: 2)%></h2>

<div id="comment-form"></div>

<% @post.comments.each do |comment|%>
    <%= render(partial: 'comments/comment', locals: {comment: comment}) %>

<% end %>
  </div>
  <div class="col-md-4">
    <%= link_to posts_path do %>
        <h3><%= t('activerecord.models.post.all') %></h3>
    <% end %>
    <h3><%= t('dialog.post.populars')%></h3>
    <ul class="list-unstyled">
      <% @top_posts.each do |post| %>
          <li>
            <%= render(:partial => 'posts/post', locals: {post: post, with_body: false, with_cols: false}) %>
          </li>
      <% end %>
    </ul>
  </div>

</div>


<h2><%= t('dialog.post.other_posts', :customer => @post.customer.full_name) %></h2>
<div class="row">
  <% @post.customer.posts.each do |post| %>
    <%= render(partial: 'posts/post', locals: {post: post, with_body: false, with_cols: true}) unless post.id == @post.id %>
  <% end %>
</div>

